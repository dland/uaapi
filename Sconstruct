# -*- python -*-

# This SConstruct will only build the Uaapi

import os.path

env = Environment()

# Build the Uaapi
dlFiles = SConscript("SConscript")

copyTgts = []
for dlFile in dlFiles:
    copyTgts.append(env.Command(os.path.basename(str(dlFile)), str(dlFile),
                                Copy("$TARGET", "$SOURCE")))

uaapiTgt = env.Alias("uaapi", copyTgts)

# Build the tests
tests = SConscript("tests/SConscript")

# Dependency of tests on uaapi explicitly specified so that, on the MS
# Windows platform, the copy of each dlFiles is done, not only
# uaapi.lib
env.Depends(tests, uaapiTgt)
testsTgt = env.Alias("tests", tests)

# Only build the uaapi if no explicit target is given
env.Default("uaapi")
